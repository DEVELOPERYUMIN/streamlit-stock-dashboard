import streamlit as st

st.set_page_config(page_title="주식 기초", layout="wide")

st.title("앱 소개")

st.subheader("1) 이 앱이 하는 일")
st.markdown(
"""
- KRX 상장사 목록에서 회사명을 검색하고 종목을 선택한다.
- 선택한 기간의 주가 데이터를 조회한다.
- 종가(기본), 이동평균선(MA20/MA60), 거래량(보조축)을 선택적으로 표시한다.
- 기간 요약(최근 종가/기간 수익률/최고·최저/최대낙폭/변동성)을 카드로 제공한다.
- 최대낙폭(MDD)이 발생한 구간(고점→저점)을 음영 및 마커로 강조한다.
- 조회 결과를 엑셀 파일로 다운로드한다.
- 종가 라인을 시간 순서대로 점진적으로 그리는 애니메이션을 제공한다.
"""
)

st.subheader("2) 이 앱이 하지 않는 일")
st.markdown(
"""
- 매수/매도 추천, 목표가 제시, 투자 판단 대행을 하지 않는다.
- 실시간(초단타) 체결 단위 데이터 제공을 하지 않는다. (일자 단위 시계열 기준)
- 뉴스/공시/재무제표 기반의 펀더멘털 분석을 자동으로 수행하지 않는다.
"""
)

st.subheader("3) 앱 내부 동작 - 데이터 흐름 및 처리 과정")
st.markdown(
"""
1) 회사명 검색 → 종목코드 선택  
2) 종목코드 정규화(숫자만 허용, 6자리 zfill) → 잘못된 입력(Yahoo 등 경로) 차단  
3) 날짜 범위 선택(시작/종료) → 데이터 조회  
4) 이동평균/수익률/MDD/변동성 계산  
5) Plotly Figure 생성  
   - Close 라인 + (선택) MA20/MA60 라인  
   - (선택) 거래량 Bar를 보조축(y2)에 표시  
   - Hover를 x unified로 통합(날짜/종가/MA/거래량을 한 번에 표시)  
   - (선택) MDD 구간 음영 + peak/trough 마커  
   - (선택) Close 타임-플레이 애니메이션(frames)  
6) 표/차트 렌더링 및 엑셀 다운로드 제공
"""
)