# pages/1_주식기초.py
import streamlit as st

st.set_page_config(page_title="주식 기초", layout="wide")

st.title("📘 주식 기초")

st.markdown(
    """
이 페이지는 **이 앱을 이해하는 데 필요한 최소한의 주식 개념**을 정리합니다.  
복잡한 이론보다는, **차트와 수치가 무엇을 의미하는지**에 초점을 둡니다.
"""
)

# ============================================================
# 1) 주식 차트를 볼 때 가장 먼저 확인할 것
# ============================================================
st.subheader("1️⃣ 주식 차트를 볼 때 가장 먼저 확인할 것")
st.markdown(
    """
주식을 볼 때 많은 사람들이 가격부터 보지만, **순서는 다음이 더 안전합니다.**

1. **조회 기간**  
   - 같은 종목이라도 기간에 따라 해석은 완전히 달라집니다.
2. **기간 수익률 + MDD**  
   - 수익이 났는지(결과)와  
   - 그 과정에서 얼마나 흔들렸는지(리스크)를 같이 봅니다.
3. **최근 흐름 요약(1주 / 1개월 / 3개월)**  
   - 전체 기간과 최근 분위기가 같은 방향인지 확인합니다.
4. **그 다음에 차트(종가/이동평균/거래량)** 를 봅니다.
"""
)

# ============================================================
# 2) 핵심 용어
# ============================================================
st.subheader("2️⃣ 핵심 용어")

with st.expander("종가(Close)"):
    st.markdown(
        """
- 하루 거래가 끝났을 때의 **마지막 가격**입니다.
- 일봉 차트의 기본 값이며, 가장 많이 사용됩니다.
- 이 앱의 **수익률, 최근 흐름, MDD 계산은 모두 종가 기준**으로 이루어집니다.
"""
    )

with st.expander("이동평균선(MA20 / MA60)"):
    st.markdown(
        """
- 특정 기간 동안의 종가 평균을 이어 붙인 선입니다.
- **MA20**: 최근 20거래일 평균 → 단기 흐름  
- **MA60**: 최근 60거래일 평균 → 중기 흐름  
- 가격의 세부 변동을 줄이고 **추세를 보기 쉽게** 만듭니다.
- 조회 기간이 짧아 데이터가 부족하면 계산이 불가능하며,
  앱에서는 해당 MA 옵션을 **자동으로 OFF** 처리합니다.
"""
    )

with st.expander("거래량(Volume)"):
    st.markdown(
        """
- 해당 날짜에 거래된 주식 수량입니다.
- 가격과 단위가 달 demonstrating different scales, **보조축(y2)** 으로 표시됩니다.
- 거래량이 크다고 반드시 상승/하락을 의미하지는 않지만,
  **가격 변동의 강도와 관심도**를 해석하는 데 도움을 줍니다.
"""
    )

with st.expander("기간 수익률(Return)"):
    st.markdown(
        """
- 선택한 기간의 **시작 종가 대비 마지막 종가 변화율**입니다.
- 계산식: (마지막 종가 / 시작 종가 − 1) × 100
- 기간 중의 변동 과정은 반영하지 않으며,
  **배당·세금·수수료는 포함하지 않습니다.**
"""
    )

with st.expander("최근 흐름 수익률 (1주 / 1개월 / 3개월)"):
    st.markdown(
        """
- 사람들이 실제로 가장 많이 확인하는 지표 중 하나입니다.
- **1주**: 최근 며칠의 단기 분위기  
- **1개월**: 한 달 체감 흐름  
- **3개월**: 최근 분기 추세  
- 이 앱에서는 상승/하락 방향을 🔺 / 🔻 아이콘으로 직관적으로 표시합니다.
- 전체 기간 수익률과 **방향이 다른지**를 꼭 비교해서 봅니다.
"""
    )

with st.expander("최대낙폭(MDD, Max Drawdown)"):
    st.markdown(
        """
- 기간 중 **가장 불리한 시점**을 수치로 표현한 지표입니다.
- 의미: “어떤 고점에서 샀다면, 이후 최대 얼마까지 떨어졌는가?”
- 계산 개념:
  1) 시점별 누적 최고가(running max)를 계산  
  2) 현재가 / 누적 최고가 − 1 → 드로우다운  
  3) 가장 작은 값(음수)이 MDD  
- 앱에서는 MDD가 발생한 **고점(peak) → 저점(trough)** 구간을
  붉은 음영과 마커로 강조합니다.
"""
    )

with st.expander("변동성(Volatility)"):
    st.markdown(
        """
- 가격이 **얼마나 크게 흔들리는지**를 나타내는 지표입니다.
- 앱에서는 **일간 수익률의 표준편차 × 100**으로 계산합니다.
- 값이 클수록 가격 변동이 큽니다.
- 데이터가 2개 미만이면 계산이 불가능합니다.
"""
    )

# ============================================================
# 3) 이 앱을 사용할 때 기억하면 좋은 점
# ============================================================
st.subheader("3️⃣ 이 앱을 사용할 때 기억하면 좋은 점")
st.markdown(
    """
- **수익률은 결과**, **MDD는 리스크**, **이동평균은 흐름**입니다.
- 최근 흐름 요약(1주/1개월/3개월)은  
  “지금 분위기가 이어지고 있는지”를 빠르게 판단하는 용도입니다.
- 이 앱은 **분석을 돕는 도구**이지,  
  매수/매도 판단을 대신하지 않습니다.
"""
)

st.info(
    "정리하면 👉 **기간 → 수익률/MDD → 최근 흐름 → 차트** 순서로 보면 가장 안정적입니다."
)
