# pages/1_주식기초.py
import streamlit as st

st.set_page_config(page_title="주식 기초", layout="wide")

st.title("주식 기초")

st.subheader("핵심 용어")
with st.expander("종가(Close)"):
    st.markdown(
    """
    - 하루 거래가 끝났을 때의 마지막 가격.
    - 일봉 차트의 기본 입력값으로 가장 흔히 사용된다.
    - 앱의 수익률, MDD 계산은 종가 시계열을 기준으로 한다.
    """
    )

with st.expander("이동평균선(MA20, MA60)"):
    st.markdown(
    """
    - 특정 기간의 종가 평균을 이어 붙인 선.
    - MA20: 최근 20거래일 평균(단기 흐름), MA60: 최근 60거래일 평균(중기 흐름)으로 자주 사용된다.
    - 기간이 짧으면(데이터가 20개 미만 등) 해당 MA는 계산이 불가능하여 NaN이 될 수 있다.
    - 앱은 MA가 전부 NaN이면 해당 표시 옵션을 자동으로 끄는 가드를 포함한다.
    """
    )

with st.expander("거래량(Volume)"):
    st.markdown(
    """
    - 해당 날짜에 거래된 주식 수량(데이터 제공처 기준).
    - 가격축과 스케일이 달라 보조축(y2)을 사용해 같은 차트에 함께 표시한다.
    - 거래량 자체가 상승/하락을 “원인”으로 증명하진 않지만, 가격 변화의 강도를 해석할 때 참고로 쓰인다.
    """
    )

with st.expander("기간 수익률(Return)"):
    st.markdown(
    """
    - 선택한 기간의 시작 종가 대비 마지막 종가 변화율.
    - 계산: (마지막 종가 / 시작 종가 - 1) × 100
    - 배당/세금/수수료는 반영하지 않는다.
    """
    )

with st.expander("최대낙폭(MDD, Max Drawdown)"):
    st.markdown(
    """
    - 기간 중 “어떤 고점에서 샀다고 가정했을 때, 이후 최저점까지 얼마나 떨어질 수 있었는가”를 나타내는 최대 손실 폭.
    - 계산 개념:
      1) 매 시점까지의 누적 최고가(running max)를 구한다.
      2) 현재가 / 누적 최고가 - 1 로 드로우다운(drawdown)을 구한다.
      3) drawdown의 최소값이 MDD(음수)다.
    - 앱은 MDD가 발생한 구간의 고점(peak)과 저점(trough)을 찾아 음영으로 강조하고 마커를 찍는다.
    """
    )

with st.expander("변동성(Volatility)"):
    st.markdown(
    """
    - 앱에서는 일간 수익률(pct_change)의 표준편차를 %로 표기한다.
    - 계산: std(일간 수익률) × 100
    - 데이터가 2개 미만이면 표준편차가 NaN이 될 수 있다.
    """
    )


st.subheader("4) 해석 팁")
st.markdown(
"""
- 기간 수익률은 “기간 시작과 끝”만 반영하므로 중간 변동(리스크)을 놓칠 수 있다. MDD를 같이 본다.
- MDD 구간이 짧고 급격하면 단기 변동 리스크가 컸던 구간으로 해석할 수 있다.
- 이동평균선은 “추세”를 단순화한 지표다. 원인 분석이 아니라 흐름 확인에 가깝다.
"""
)
